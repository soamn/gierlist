"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},2811:(e,r,s)=>{s.r(r),s.d(r,{originalPathname:()=>f,patchFetch:()=>w,requestAsyncStorage:()=>h,routeModule:()=>v,serverHooks:()=>q,staticGenerationAsyncStorage:()=>x});var t={};s.r(t),s.d(t,{POST:()=>g});var n=s(9303),a=s(8716),o=s(670),i=s(7070),u=s(3646),p=s(3077),l=s(2023),d=s.n(l),m=s(1482),c=s.n(m);async function g(e){await (0,u.Z)();let{email:r,password:s}=await e.json();try{let e=await p.Z.findOne({email:r});e||i.NextResponse.json({sucess:!1,message:"invalid email or password"},{status:400}),await d().compare(s,e.password)||i.NextResponse.json({sucess:!1,message:"invalid email or password"},{status:400});let t=c().sign({id:e._id},process.env.JWT_SECRET,{expiresIn:"1h"});return i.NextResponse.json({sucess:!0,token:t},{status:200})}catch(e){return i.NextResponse.json({success:!1,message:e.message},{status:400})}}let v=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"C:\\Users\\negia\\Desktop\\gierlist\\gierlist\\app\\api\\auth\\login\\route.js",nextConfigOutput:"",userland:t}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:q}=v,f="/api/auth/login/route";function w(){return(0,o.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:x})}},3646:(e,r,s)=>{s.d(r,{Z:()=>i});var t=s(1185),n=s.n(t);let a=process.env.MONGODB_URI;if(!a)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let i=async function(){return o.conn||(o.promise||(o.promise=n().connect(a,{bufferCommands:!1}).then(e=>e)),o.conn=await o.promise),o.conn}},3077:(e,r,s)=>{s.d(r,{Z:()=>o});var t=s(1185),n=s.n(t);let a=new(n()).Schema({username:{type:String,required:[!0,"Please provide a username"],unique:!0},email:{type:String,required:[!0,"Please provide an email"],unique:!0},password:{type:String,required:[!0,"Please provide a password"]},streamKey:{type:String,required:!0,unique:!0},stream:[{type:n().Schema.Types.ObjectId,ref:"Stream"}]}),o=n().models.User||n().model("User",a)}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[948,972,482,23],()=>s(2811));module.exports=t})();