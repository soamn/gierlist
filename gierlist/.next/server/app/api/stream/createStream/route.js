"use strict";(()=>{var e={};e.id=758,e.ids=[758],e.modules={1185:e=>{e.exports=require("mongoose")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},2603:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>y,patchFetch:()=>q,requestAsyncStorage:()=>v,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>S});var s={};t.r(s),t.d(s,{POST:()=>l});var a=t(9303),n=t(8716),i=t(670),o=t(7070),u=t(3646),p=t(3077),m=t(3338),c=t(1482),d=t.n(c);async function l(e){await (0,u.Z)();let{token:r,streamName:t,streamDescription:s}=await e.json();if(!r||!t)return o.NextResponse.json({success:!1,message:"Missing required fields"},{status:400});try{let e=d().verify(r,process.env.JWT_SECRET),a=await p.Z.findOne({_id:e.id});if(!a)return o.NextResponse.json({success:!1,message:"User not found"},{status:404});let n=await m.Z.create({streamName:t,streamDescription:s,user:a._id,status:!0});return a.stream.push(n._id),await a.save(),o.NextResponse.json({success:!0,stream:n,user:a},{status:201})}catch(e){return console.error("Error creating stream:",e),o.NextResponse.json({success:!1,message:e.message},{status:500})}}let g=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/stream/createStream/route",pathname:"/api/stream/createStream",filename:"route",bundlePath:"app/api/stream/createStream/route"},resolvedPagePath:"C:\\Users\\negia\\Desktop\\gierlist\\gierlist\\app\\api\\stream\\createStream\\route.js",nextConfigOutput:"",userland:s}),{requestAsyncStorage:v,staticGenerationAsyncStorage:S,serverHooks:f}=g,y="/api/stream/createStream/route";function q(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:S})}},3646:(e,r,t)=>{t.d(r,{Z:()=>o});var s=t(1185),a=t.n(s);let n=process.env.MONGODB_URI;if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let o=async function(){return i.conn||(i.promise||(i.promise=a().connect(n,{bufferCommands:!1}).then(e=>e)),i.conn=await i.promise),i.conn}},3338:(e,r,t)=>{t.d(r,{Z:()=>i});var s=t(1185),a=t.n(s);let n=new(a()).Schema({streamName:{type:String,required:[!0,"Please provide a name"]},streamDescription:{type:String},status:{type:String,default:!1},user:{type:a().Schema.Types.ObjectId,ref:"User"}}),i=a().models.Stream||a().model("Stream",n)},3077:(e,r,t)=>{t.d(r,{Z:()=>i});var s=t(1185),a=t.n(s);let n=new(a()).Schema({username:{type:String,required:[!0,"Please provide a username"],unique:!0},email:{type:String,required:[!0,"Please provide an email"],unique:!0},password:{type:String,required:[!0,"Please provide a password"]},streamKey:{type:String,required:!0,unique:!0},stream:[{type:a().Schema.Types.ObjectId,ref:"Stream"}]}),i=a().models.User||a().model("User",n)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,972,482],()=>t(2603));module.exports=s})();